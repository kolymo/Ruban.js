{"version":3,"file":"ruban.min.js","sources":["../src/modules/ribbon.js","../src/modules/utils/errors.js","../src/modules/utils/sanitize.js","../src/modules/utils/http.js","../src/modules/utils/secure-form.js","../src/modules/utils/form.js","../src/main.js"],"sourcesContent":["export default function $_(object) {\r\n    \r\n    class DOMElement {\r\n\r\n        constructor(object) {\r\n            if (object[0] === \"#\") {\r\n                this.element = document.getElementById(object.slice(1));\r\n            } else {\r\n                this.element = document.querySelector(object);\r\n            }\r\n\r\n            if (!this.element) {\r\n                throw new Error(`Element not found: ${object}`);\r\n            }\r\n        }\r\n\r\n        // Method to get the inner text of the element\r\n        getText() {\r\n            return this.element.innerText;\r\n        }\r\n\r\n        // Method to get the label text of the element\r\n        getLabelText(index = 0) {\r\n            const inputName =\r\n                this.element.name ||\r\n                this.element.closest('form')?.querySelectorAll(\"input, select, textarea\")[index].name;\r\n            if (!inputName) return null;\r\n\r\n            const label = this.element.closest(\"form\")?.querySelector(`label[for=\"${inputName}\"]`);\r\n\r\n            return label ? label.innerText : null;\r\n        }\r\n        \r\n        // Method to set the inner text of the element\r\n        setText(text) {\r\n            this.element.innerText = text;\r\n        }\r\n\r\n        // Method to get the element's value (for inputs, etc.)\r\n        getValue() {\r\n            return this.element.value;\r\n        }\r\n\r\n        // Method to set the element's value (for inputs, etc.)\r\n        setValue(value) {\r\n            this.element.value = value;\r\n        }\r\n\r\n        // Method to add a class to the element\r\n        addClass(className) {\r\n            this.element.classList.add(className);\r\n        }\r\n\r\n        // Method to remove a class from the element\r\n        removeClass(className) {\r\n            this.element.classList.remove(className);\r\n        }\r\n\r\n        // Method to add an event listener to the element\r\n        on(event, callback) {\r\n            this.element.addEventListener(event, callback);\r\n        }\r\n\r\n    }\r\n\r\n    return new DOMElement(object);\r\n}","export class NetworkError extends Error {\r\n    constructor(message) {\r\n        super(message);\r\n        this.name = \"NetworkError\";\r\n    }\r\n}\r\n\r\nexport class TimeoutError extends Error {\r\n    constructor(message) {\r\n        super(message);\r\n        this.name = \"TimeoutError\";\r\n    }\r\n}\r\n\r\nexport class ValidationError extends Error {\r\n    constructor(message) {\r\n        super(message);\r\n        this.name = \"ValidationError\";\r\n    }\r\n}","// Sanitize Input String (Letters and Numbers Only)\r\nexport function sanis(inputString) {\r\n    return inputString.replace(/[^a-zA-Z0-9]/g, \"\");\r\n}\r\n\r\n// Sanitize Input Letters Only\r\nexport function sanil(inputString) {\r\n    return inputString.replace(/[^a-zA-Z]/g, \"\");\r\n}\r\n\r\n// Sanitize Input Numbers Only\r\nexport function sanin(inputString) {\r\n    return inputString.replace(/[^0-9]/g, \"\");\r\n}\r\n\r\n// Extend String prototype with the custom sanitization methods\r\nString.prototype.sanis = function () {\r\n    return this.replace(/[^a-zA-Z0-9]/g, \"\");\r\n};\r\n\r\nString.prototype.sanil = function () {\r\n    return this.replace(/[^a-zA-Z]/g, \"\");\r\n};\r\n\r\nString.prototype.sanin = function () {\r\n    return this.replace(/[^0-9]/g, \"\");\r\n};\r\n","import { NetworkError, TimeoutError } from \"./errors\";\r\n\r\nexport async function get(url, options = {}) {\r\n    const { timeout = 7500, secretKey } = options;\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n    const {\r\n        headers = {},\r\n        queryParams = {},\r\n        includeCredentials = false,\r\n    } = options;\r\n\r\n    try {\r\n        // Validate URL\r\n        if (!url || typeof url !== \"string\") {\r\n            throw new Error(\"Invalid URL provided.\");\r\n        }\r\n\r\n        // Append query parameters to the URL\r\n        const urlWithParams = new URL(url);\r\n        Object.entries(queryParams).forEach(([key, value]) => {\r\n            urlWithParams.searchParams.append(key, value);\r\n        });\r\n\r\n        // Add secret key to headers if provided\r\n        if (secretKey) {\r\n            headers[\"Authorization\"] = `Bearer ${secretKey}`;\r\n        }\r\n\r\n        // Make the request\r\n        const response = await fetch(urlWithParams.toString(), {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                ...headers,\r\n            },\r\n            credentials: includeCredentials ? \"include\" : \"omit\",\r\n            signal: controller.signal,\r\n        });\r\n\r\n        // Clear the timeout\r\n        clearTimeout(timeoutId);\r\n\r\n        // Check for HTTP errors\r\n        if (!response.ok) {\r\n            throw new NetworkError(`Request failed with status: ${response.status}`);\r\n        }\r\n\r\n        // Parse and return the response data\r\n        const responseData = await response.json();\r\n        return responseData;\r\n\r\n    } catch (error) {\r\n        if (error instanceof NetworkError) {\r\n            console.error(\"Network error:\", error.message);\r\n        } else if (error instanceof TimeoutError) {\r\n            console.error(\"Timeout error:\", error.message);\r\n        } else {\r\n            console.error(\"Unknown error:\", error);\r\n        }\r\n        throw error;\r\n    }\r\n}","import { ValidationError } from \"./errors\";\r\n\r\nfunction getFormData(formElement) {\r\n    const formData = new FormData(formElement);\r\n    const formObject = {};\r\n\r\n    formData.forEach((value, key) => {\r\n        formObject[key] = value;\r\n    });\r\n\r\n    return formObject;\r\n}\r\n\r\nexport default function secureForm(form) {\r\n    // Setup legit version of form\r\n    const originalForm = getFormData(form);\r\n    console.log('Original form:', originalForm);\r\n\r\n    // Listen for form submission\r\n    form.addEventListener('submit', (event) => {\r\n        event.preventDefault();\r\n        const formObject = getFormData(form);\r\n        console.log('Form object:', formObject);\r\n\r\n        // Compare all keys/name(inputs)\r\n        const isFormSecure = Object.keys(formObject).every((key) => {\r\n\r\n            return key in originalForm;\r\n        });\r\n\r\n        if (isFormSecure) {\r\n            form.submit();\r\n        } else {\r\n            throw new ValidationError('Form is not secure!');\r\n        }\r\n    });\r\n}","import { sanis, sanil, sanin } from './sanitize.js';\r\n\r\n\r\nexport default function form(object) {\r\n    class FormElement {\r\n        constructor(object) {\r\n            this.element = document.getElementById(object);\r\n\r\n            if (!this.element) {\r\n                throw new Error(`Element not found: ${object}`);\r\n            }\r\n\r\n            if (this.element.tagName !== \"FORM\") {\r\n                throw new Error(\"Element is not a form.\");\r\n            }\r\n        }\r\n\r\n        getLabelText(index = 0) {\r\n            const inputs = this.element.querySelectorAll(\"input, select, textarea\");\r\n            if (index >= inputs.length) return null;\r\n\r\n            const inputName = inputs[index].name;\r\n            if (!inputName) return null;\r\n\r\n            const label = this.element.querySelector(`label[for=\"${inputName}\"]`);\r\n            return label ? label.innerText : null;\r\n        }\r\n\r\n        async post({ data = {}, options = { csrf: true, textOnly: false }, url = window.location.href } = {}) {\r\n            // Convert form data into an object if not passed\r\n            if (Object.keys(data).length === 0) {\r\n                data = new FormData(this.element);\r\n                // Iterate over FormData entries and convert to object\r\n                //data = Object.fromEntries(data.entries());\r\n                // Sanitize each input value\r\n                data = Object.fromEntries(\r\n                    Array.from(data.entries()).map(([key, value]) => [\r\n                        key,\r\n                        options.textOnly ? sanis(value) : value,\r\n                    ])\r\n                );\r\n            }\r\n\r\n            // Check for CSRF token\r\n            let csrfToken = document.querySelector('meta[name=\"csrf-token\"]')?.content;\r\n            if (!csrfToken) {\r\n                csrfToken = document.querySelector('input[name=\"_csrf\"]')?.value || document.querySelector('input[name=\"csrf\"]')?.value;\r\n            }\r\n            if (!csrfToken && options.csrf) {\r\n                throw new Error(\"CSRF token not found.\");\r\n            }\r\n\r\n\r\n            // Headers\r\n            const headers = {\r\n                \"Content-Type\": \"application/json\",\r\n                ...(options.csrf && csrfToken ? { \"X-CSRF-Token\": csrfToken } : {}),\r\n            };\r\n\r\n            try {\r\n                const response = await fetch(url, {\r\n                    method: \"POST\",\r\n                    headers: headers,\r\n                    body: JSON.stringify(data),\r\n                    credentials: \"include\"\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(\r\n                        `Request failed with status: ${response.status}`\r\n                    );\r\n                }\r\n\r\n                const responseData = await response.json();\r\n\r\n                return responseData;\r\n                \r\n            } catch (error) {\r\n                console.error(\"Error during form submission:\", error);\r\n                return { error: error.message };\r\n            }\r\n        }\r\n\r\n        populateForm(data) {\r\n            for (let key in data) {\r\n                const field = this.element.querySelector(`[name=\"${key}\"]`);\r\n                field ? field.value = data[key] : null;\r\n            }\r\n        }\r\n    }\r\n\r\n    return new FormElement(object);\r\n}","import $_ from \"./modules/ribbon\";\r\nimport * as utils from \"./modules/utils\";\r\n\r\nconst Ruban = {\r\n    $_,\r\n    ...utils,\r\n};\r\n\r\nexport default Ruban;\r\n\r\nif (typeof window !== \"undefined\") {\r\n    window.Ruban = window.Ruban || Ruban;\r\n    window.$_ = $_;\r\n    window.$ = $_;\r\n}\r\n\r\n(function (global) {\r\n    // Default configuration\r\n    const defaultConfig = {\r\n        debug: false,\r\n        // theme: \"light\",\r\n        // apiEndpoint: \"https://api.example.com\"\r\n    };\r\n\r\n    // Ensure global config object exists\r\n    global.RubanConfig = global.RubanConfig || {};\r\n\r\n    // Check if `ruban.config.js` was loaded\r\n    const isConfigFileLoaded = Object.keys(global.RubanConfig).length > 0;\r\n\r\n    // Merge config with priority\r\n    const mergeConfigs = (defaultConfig, userConfig) => {\r\n        const result = { ...defaultConfig };\r\n        Object.keys(userConfig).forEach((key) => {\r\n            if (userConfig[key] !== undefined) {\r\n                result[key] = userConfig[key];\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    const finalConfig = mergeConfigs(defaultConfig, global.RubanConfig);\r\n\r\n    // Check if config is valid\r\n    const hasValidConfig = Object.values(global.RubanConfig).some(val => val !== undefined);\r\n    if (!isConfigFileLoaded && !hasValidConfig) {\r\n        console.warn(\"[Ruban Warning]: No valid configuration found. Using default settings.\");\r\n    }\r\n\r\n    // Extend global Ruban object\r\n    global.Ruban = {\r\n        ...global.Ruban,\r\n        getConfig: () => finalConfig,\r\n        setConfig: (newConfig) => {\r\n            Object.assign(finalConfig, newConfig);\r\n            global.manualRubanConfigSet = true;\r\n        },\r\n        log: (message) => {\r\n            if (finalConfig.debug) {\r\n                console.log(`[Ruban Debug]: ${message}`);\r\n            }\r\n        }\r\n    };\r\n\r\n    if (!global.Ruban.__DOMContentLoaded) {\r\n        global.Ruban.__DOMContentLoaded = true;\r\n\r\n        document.addEventListener(\"DOMContentLoaded\", function () {\r\n            const forms = document.querySelectorAll('form[data-ruban-form-secure]');\r\n            forms.forEach((form) => {\r\n                if (typeof global.Ruban.secureForm === \"function\") {\r\n                    form.setAttribute(\"data-ruban-form-secure\", \"true\");\r\n                    global.Ruban.secureForm(form);\r\n                } else {\r\n                    form.removeAttribute(\"data-ruban-form-secure\");\r\n                    console.warn(\"[Ruban Warning]: secureForm function not found. Make sure it is properly imported.\");\r\n                }\r\n\r\n                console.log(form);\r\n\r\n                form.querySelectorAll('[type=\"submit\"]').forEach((submitBtn) => {\r\n                    console.log(submitBtn);\r\n                    submitBtn.addEventListener(\"click\", function (event) {\r\n                        //event.preventDefault(); // good one\r\n                        // TODO - Add submitForm function ?\r\n                        /* if (typeof global.Ruban.submitForm === \"function\") {\r\n                            global.Ruban.submitForm(form);\r\n                        } else {\r\n                            console.warn(\"[Ruban Warning]: submitForm function not found. Make sure it is properly imported.\");\r\n                        } */\r\n                    });\r\n                });\r\n\r\n                form.addEventListener(\"submit\", function (event) {\r\n                    //event.preventDefault();\r\n                    // TODO - Add submitForm function ?\r\n                    /* if (typeof global.Ruban.submitForm === \"function\") {\r\n                        global.Ruban.submitForm(form);\r\n                    } else {\r\n                        console.warn(\"[Ruban Warning]: submitForm function not found. Make sure it is properly imported.\");\r\n                    } */\r\n                });\r\n            });\r\n\r\n            // Only dispatch event if forms exist\r\n            if (forms.length > 0) {\r\n                document.dispatchEvent(new Event(\"Ruban_DOMContentLoaded\"));\r\n            }\r\n        });\r\n    }\r\n\r\n    \r\n    console.log(\"Ruban is ready!\");\r\n\r\n})(window);\r\n"],"names":["$_","object","DOMElement","_createClass","_classCallCheck","this","element","document","getElementById","slice","querySelector","Error","concat","key","value","innerText","_this$element$closest","_this$element$closest2","index","arguments","length","undefined","inputName","name","closest","querySelectorAll","label","text","className","classList","add","remove","event","callback","addEventListener","NetworkError","_Error","message","_this","_callSuper","_inherits","_wrapNativeSuper","TimeoutError","_Error2","_this2","ValidationError","_Error3","_this3","sanis","inputString","replace","_get","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","options","_options$timeout","timeout","secretKey","controller","timeoutId","_options$headers","headers","_options$queryParams","queryParams","_options$includeCrede","includeCredentials","urlWithParams","response","responseData","_args","wrap","_context","prev","next","AbortController","setTimeout","abort","URL","Object","entries","forEach","_ref","_ref2","_slicedToArray","searchParams","append","fetch","toString","method","_objectSpread","credentials","signal","sent","clearTimeout","ok","status","json","abrupt","t0","console","error","stop","apply","getFormData","formElement","formData","FormData","formObject","String","prototype","sanil","sanin","FormElement","tagName","inputs","_post","_document$querySelect","_ref$data","data","_ref$options","_ref$url","csrfToken","_document$querySelect2","_document$querySelect3","csrf","textOnly","window","location","href","keys","fromEntries","Array","from","map","_ref3","content","body","JSON","stringify","field","get","_x","form","originalForm","log","preventDefault","every","submit","Ruban","utils","$","global","RubanConfig","isConfigFileLoaded","finalConfig","defaultConfig","userConfig","result","mergeConfigs","debug","hasValidConfig","values","some","val","warn","getConfig","setConfig","newConfig","assign","manualRubanConfigSet","__DOMContentLoaded","forms","secureForm","setAttribute","removeAttribute","submitBtn","dispatchEvent","Event"],"mappings":"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"}